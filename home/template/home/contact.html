{% extends 'home/base.html' %}

{% block title %}Contact Us - {{ restaurant.name }}{% endblock %}

{% block content %}
<div class="container">
    <h1>Contact Us</h1>
    
    <div class="contact-form-container">
        <form id="contactForm" onsubmit="return validateForm()">
            <div class="form-group">
                <label for="name">Name *</label>
                <input type="text" id="name" name="name" placeholder="Your full name">
                <div class="error-message" id="nameError"></div>
            </div>

            <div class="form-group">
                <label for="email">Email *</label>
                <input type="email" id="email" name="email" placeholder="your.email@example.com">
                <div class="error-message" id="emailError"></div>
            </div>

            <div class="form-group">
                <label for="phone">Phone (Optional)</label>
                <input type="tel" id="phone" name="phone" placeholder="(555) 123-4567">
            </div>

            <div class="form-group">
                <label for="message">Message *</label>
                <textarea id="message" name="message" rows="5" placeholder="How can we help you?"></textarea>
                <div class="error-message" id="messageError"></div>
            </div>

            <button type="submit" class="submit-btn">Send Message</button>
        </form>
    </div>

    <div class="contact-info">
        <!-- Your existing contact information here -->
    </div>
</div>

<!-- basic CSS styking  -->
<style>
    .container {
        max-width: 800px;
        margin: 2rem auto;
        padding: 0 1rem;
    }

    .contact-form-container {
        background: white;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-bottom: 2rem;
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: #333;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"],
    textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 4px;
        font-size: 1rem;
        transition: border-color 0.3s;
        box-sizing: border-box;
    }

    input:focus,
    textarea:focus {
        outline: none;
        border-color: #d32f2f;
    }

    .error-message {
        color: #d32f2f;
        font-size: 0.9rem;
        margin-top: 0.3rem;
        min-height: 1.2rem;
    }

    .submit-btn {
        background-color: #d32f2f;
        color: white;
        padding: 12px 24px;
        border: none;
        border-radius: 4px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .submit-btn:hover {
        background-color: #b71c1c;
    }

    /* Validation styles */
    input.invalid,
    textarea.invalid {
        border-color: #d32f2f;
        background-color: #ffebee;
    }

    input.valid,
    textarea.valid {
        border-color: #4caf50;
    }
</style>

<script>
function validateForm() {
    let isValid = true;
    
    // Reset previous errors
    document.querySelectorAll('.error-message').forEach(el => {
        el.textContent = '';
    });
    document.querySelectorAll('input, textarea').forEach(el => {
        el.classList.remove('invalid', 'valid');
    });

    // Validate Name
    const nameInput = document.getElementById('name');
    const nameError = document.getElementById('nameError');
    if (!nameInput.value.trim()) {
        nameError.textContent = 'Please enter your name';
        nameInput.classList.add('invalid');
        isValid = false;
    } else {
        nameInput.classList.add('valid');
    }

    // Validate Email
    const emailInput = document.getElementById('email');
    const emailError = document.getElementById('emailError');
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    
    if (!emailInput.value.trim()) {
        emailError.textContent = 'Please enter your email address';
        emailInput.classList.add('invalid');
        isValid = false;
    } else if (!emailRegex.test(emailInput.value)) {
        emailError.textContent = 'Please enter a valid email address';
        emailInput.classList.add('invalid');
        isValid = false;
    } else {
        emailInput.classList.add('valid');
    }

    // Validate Message
    const messageInput = document.getElementById('message');
    const messageError = document.getElementById('messageError');
    if (!messageInput.value.trim()) {
        messageError.textContent = 'Please enter your message';
        messageInput.classList.add('invalid');
        isValid = false;
    } else {
        messageInput.classList.add('valid');
    }

    if (!isValid) {
        // Scroll to first error
        const firstError = document.querySelector('.invalid');
        if (firstError) {
            firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
            firstError.focus();
        }
    }

    return isValid;
}

// Real-time validation
document.addEventListener('DOMContentLoaded', function() {
    const inputs = document.querySelectorAll('#name, #email, #message');
    
    inputs.forEach(input => {
        input.addEventListener('blur', function() {
            validateField(this);
        });
        
        input.addEventListener('input', function() {
            if (this.classList.contains('invalid')) {
                validateField(this);
            }
        });
    });

    function validateField(field) {
        const errorElement = document.getElementById(field.id + 'Error');
        
        if (field.id === 'name') {
            if (!field.value.trim()) {
                errorElement.textContent = 'Please enter your name';
                field.classList.add('invalid');
                field.classList.remove('valid');
            } else {
                errorElement.textContent = '';
                field.classList.remove('invalid');
                field.classList.add('valid');
            }
        }
        
        if (field.id === 'email') {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!field.value.trim()) {
                errorElement.textContent = 'Please enter your email address';
                field.classList.add('invalid');
                field.classList.remove('valid');
            } else if (!emailRegex.test(field.value)) {
                errorElement.textContent = 'Please enter a valid email address';
                field.classList.add('invalid');
                field.classList.remove('valid');
            } else {
                errorElement.textContent = '';
                field.classList.remove('invalid');
                field.classList.add('valid');
            }
        }
        
        if (field.id === 'message') {
            if (!field.value.trim()) {
                errorElement.textContent = 'Please enter your message';
                field.classList.add('invalid');
                field.classList.remove('valid');
            } else {
                errorElement.textContent = '';
                field.classList.remove('invalid');
                field.classList.add('valid');
            }
        }
    }
});
</script>
{% endblock %}